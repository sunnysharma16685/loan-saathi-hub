{% extends "base.html" %}
{% block content %}
<div class="card mb-3">
  <div class="card-body">
    <h5 class="card-title">{{ profile.full_name }}</h5>
    <p class="card-text"><strong>Email:</strong> {{ user.email }}</p>
    <p class="card-text"><strong>Mobile:</strong> {{ profile.mobile }}</p>
    <p class="card-text"><strong>City:</strong> {{ profile.city }}, {{ profile.state }}</p>
    <p class="card-text"><strong>Role:</strong> {{ user.role|title }}</p>

    {% if user.role == "applicant" %}
      <hr>
      <h6>Applicant Details</h6>
      <p><strong>Job Type:</strong> {{ applicant_details.job_type }}</p>
      <p><strong>CIBIL Score:</strong> {{ applicant_details.cibil_score }}</p>
      <p><strong>Employment Type:</strong> {{ applicant_details.employment_type }}</p>
      <p><strong>Company:</strong> {{ applicant_details.company_name }} ({{ applicant_details.company_type }})</p>
      <p><strong>Salary:</strong> {{ applicant_details.current_salary }}</p>
      <p><strong>Other Income:</strong> {{ applicant_details.other_income }}</p>
      <p><strong>Total EMI:</strong> {{ applicant_details.total_emi }}</p>
      <p><strong>Business:</strong> {{ applicant_details.business_name }} ({{ applicant_details.business_type }})</p>
      <p><strong>Turnover (Last Yr):</strong> {{ applicant_details.last_year_turnover }}</p>

    {% elif user.role == "lender" %}
      <hr>
      <h6>Lender Details</h6>
      <p><strong>Lender Type:</strong> {{ lender_details.lender_type }}</p>
      <p><strong>Bank/Firm:</strong> {{ lender_details.bank_firm_name }}</p>
      <p><strong>Branch:</strong> {{ lender_details.branch_name }}</p>
      <p><strong>Designation:</strong> {{ lender_details.designation }}</p>
      <p><strong>DSA Code:</strong> {{ lender_details.dsa_code }}</p>
    {% endif %}

    <a href="{% url 'edit_profile' user.id %}" class="btn btn-primary mt-2">Edit Profile</a>
  </div>
</div>


  <!-- Loan Details -->
  <h4>Loan Details</h4>
  <table class="table table-bordered">
    <tbody>
      <tr>
        <th>Loan ID</th>
        <td>{{ loan.id|default:"N/A" }}</td>
      </tr>
      <tr>
        <th>Amount</th>
        <td>{{ loan.amount|default:"N/A" }}</td>
      </tr>
      <tr>
        <th>Purpose</th>
        <td>{{ loan.purpose|default:"N/A" }}</td>
      </tr>
      <tr>
        <th>Duration</th>
        <td>{{ loan.duration|default:"N/A" }}</td>
      </tr>
      <tr>
        <th>Status</th>
        <td>{{ loan.status|default:"N/A" }}</td>
      </tr>
      <tr>
        <th>Created At</th>
        <td>{{ loan.created_at|default:"N/A" }}</td>
      </tr>
    </tbody>
  </table>
</div>
{% endblock %}
