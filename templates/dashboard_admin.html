{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Loan Saathi Hub - Admin Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; background: #f5f8fa; margin: 0; padding: 0; }
        header, footer { background: #212529; color: #fff; padding: 15px 30px; }
        header { display: flex; justify-content: space-between; align-items: center; }
        header a { color: #fff; text-decoration: none; margin-left: 15px; font-weight: 600; }
        h1 { margin: 20px; font-size: 24px; color: #333; }
        section { margin: 20px; }
        .card { background: #fff; padding: 20px; border-radius: 6px; box-shadow: 0 0 8px rgba(0,0,0,0.1); margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        table th, table td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        table th { background: #212529; color: #fff; }
        footer { text-align: center; font-size: 14px; }
        footer a { color: #fff; margin: 0 5px; text-decoration: none; }
    </style>
</head>
<body>

<header>
    <div>Loan Saathi Hub - Admin</div>
    <div>
        <span>Welcome, {{ request.user.first_name }}</span>
        <a href="{% url 'home' %}">Home</a>
        <a href="{% url 'logout' %}">Logout</a>
    </div>
</header>

<h1>Admin Dashboard</h1>

<section>
    <div class="card">
        <h2>Applicants</h2>
        <table>
            <thead>
                <tr>
                    <th>Sl No.</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Mobile</th>
                </tr>
            </thead>
            <tbody>
                {% for applicant in users %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ applicant.first_name }} {{ applicant.last_name }}</td>
                    <td>{{ applicant.email }}</td>
                    <td>{{ applicant.mobile }}</td>
                </tr>
                {% empty %}
                <tr><td colspan="4">No applicants found.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="card">
        <h2>Lenders</h2>
        <table>
            <thead>
                <tr>
                    <th>Sl No.</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Mobile</th>
                </tr>
            </thead>
            <tbody>
                {% for lender in agents %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ lender.first_name }} {{ lender.last_name }}</td>
                    <td>{{ lender.email }}</td>
                    <td>{{ lender.mobile }}</td>
                </tr>
                {% empty %}
                <tr><td colspan="4">No lenders found.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="card">
        <h2>Loan Requests</h2>
        <table>
            <thead>
                <tr>
                    <th>Sl No.</th>
                    <th>Loan ID</th>
                    <th>Type</th>
                    <th>Amount</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for loan in loans %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ loan.loan_id }}</td>
                    <td>{{ loan.loan_type }}</td>
                    <td>₹{{ loan.amount_requested }}</td>
                    <td>{{ loan.status }}</td>
                </tr>
                {% empty %}
                <tr><td colspan="5">No loan requests found.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="card">
        <h2>Payments</h2>
        <table>
            <thead>
                <tr>
                    <th>Sl No.</th>
                    <th>Loan ID</th>
                    <th>Lender</th>
                    <th>Amount</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for payment in payments %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ payment.loan_request.loan_id }}</td>
                    <td>{{ payment.agent.first_name }}</td>
                    <td>₹{{ payment.amount }}</td>
                    <td>{{ payment.status }}</td>
                </tr>
                {% empty %}
                <tr><td colspan="5">No payments found.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</section>

<footer>
    © 2025 LoanSaathiHub. All rights reserved. |
    <a href="#">About us</a> |
    <a href="#">Terms & Conditions</a> |
    <a href="#">Privacy Policy</a> |
    <a href="#">FAQ</a> |
    <a href="#">Support</a>
</footer>

</body>
</html>
