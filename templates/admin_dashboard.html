{% extends 'base.html' %}

{% block title %}Admin Dashboard - LoanSaathiHub{% endblock %}

{% block content %}
<h2>Admin Dashboard</h2>
<p>Welcome, {{ session.user_name }}</p>

<div>
  <h3>Quick Stats</h3>
  <ul>
    <li>Total Users: {{ user_count }}</li>
    <li>Total Agents: {{ agent_count }}</li>
    <li>Total Loan Applications: {{ loan_count }}</li>
  </ul>
</div>

<div>
  <h3>Recent Loan Applications</h3>
  {% if recent_loans %}
    <table border="1" cellpadding="5" cellspacing="0">
      <tr>
        <th>User</th><th>Loan Type</th><th>Amount</th><th>Status</th><th>Applied On</th>
      </tr>
      {% for loan in recent_loans %}
        <tr>
          <td>{{ loan.user.first_name }} {{ loan.user.last_name }}</td>
          <td>{{ loan.loan_type.name }}</td>
          <td>{{ loan.amount }}</td>
          <td>{{ loan.application_status.replace('_',' ').title() }}</td>
          <td>{{ loan.applied_at[:10] }}</td>
        </tr>
      {% endfor %}
    </table>
  {% else %}
    <p>No recent loans found.</p>
  {% endif %}
</div>
{% endblock %}